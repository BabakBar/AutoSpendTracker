# Smart Auto Spend Tracker!

## Introduction

Hola! I'm thrilled to share a special project that made my life in Mexico simpler and more fun. Moving from Europe, I found myself juggling expenses across different currencies â€“ day-to-day costs in MXN Peso, some in EURO, and subscriptions in Dollars. It was the perfect opportunity to blend some Python, Cloud, and power of AI to craft a auto-spending tracker.

## Project Overview

This is a tool I built to track, categorize, and monitor my spending from multiple accounts, starting with Wise & PayPal, which I use the most. It utilizes Google Vertex AI 'Gemini Pro' to process and analyze my transaction data.

![Workflow](/images/Workflow.png)
*Overall, this is how the entire project works.*

## How It Works

1. **Transaction Notification:** As soon as I use Wise or PayPal at any moment, they notify me by sending a mail and the new entry will added to my google sheet in the background. This entry includes date, time, merchant, amount, currency, account and category generated by AI - all in real time. What kicks this whole thing off is an email. 

![Output](/images/Output.png)
*with each transaction a new entry is added!*

Rather than giving all bank credentials to other apps (it can be insecure), I set my banks to email me for a transaction above the minimum limit!

2. **Function Trigger:** The Gmail API listens for new emails and triggers a parsing function.
3. **Prompting Gemini Pro:** The prompt is where magic happens. Prompting lets you ask AI to accomplish a task. For this project that magic is turning any transaction details into useful data. For my use case where PayPal emails are in German and Wise in English, I had to prompt the chatbot about this. So i went through some iterations for the prompt. It's been constant improvement but still has room to grow. I actually keep track the old prompts in my local code because it's fun to see it evolve.

I've found it's good to give a sample output of what I'd like the JSON to look like and then explain the details of the schema. It's remarkable that with just a few sentences and one example, Gemini is able to understand my intention for it and the specific structure of output I'm looking for. At the end Gemini Pro enriches the transaction data and categorizes the expense and we get a parsed transaction data like: 
{
'amount': '335', 
'currency': 'MXN', 
'merchant': 'Uber Eats', 
'category': 'Food & Dining', 
'date': '08-02-2024', 
'time': '20:25 PM', 
'account': 'Wise'
}

This is remarkable to have nice formatted info of all the details. 

4. **Google Sheets Update:** I included an app script for the google sheet (can be activated from extensions in sheets) to make a custom font/size of new entries.  The final data is automatically updated in Google Sheets for easy tracking and analysis.

## Features

- **Multi-Currency Support:** Seamlessly handles MXN, EUR, and USD.
- **Automated Tracking:** Integrates with email notifications for transaction alerts.
- **Intelligent Categorization:** Leverages AI to categorize expenses.
- **Google Sheets Integration:** Presents a neat summary of expenses with details.
- **Open Source:** Shared with the community to inspire and innovate together.

## Contact

This took me 3 weekends to figure out and setup, hopefully with this code you can make it work in even less time! If you're curious about the project, want to contribute, or just say 'hola', feel free to reach out!

- **Email:** [Email](babak.barghi@gmail.com)
- **LinkedIn:** [LinkdeIn]([https://linkedin.com/in/yourusername](https://www.linkedin.com/in/babakbarghi/)https://www.linkedin.com/in/babakbarghi/)
