# ==============================================================================
# AutoSpendTracker Production Environment Configuration
# ==============================================================================
# This file serves as a template for production deployment on Coolify
# Copy this file and set the values in Coolify's Environment Variables section
# ==============================================================================

# ==============================================================================
# Google Cloud Configuration (REQUIRED)
# ==============================================================================
# Your Google Cloud Project ID
PROJECT_ID=your-gcp-project-id

# Google Cloud region (default: us-central1)
LOCATION=us-central1

# Path to service account JSON file (mounted in container)
SERVICE_ACCOUNT_FILE=/app/secrets/ASTservice.json

# ==============================================================================
# Google Sheets Configuration (REQUIRED)
# ==============================================================================
# Your Google Sheets spreadsheet ID (from the URL)
# Example: https://docs.google.com/spreadsheets/d/YOUR_SPREADSHEET_ID/edit
SPREADSHEET_ID=your-google-sheets-spreadsheet-id

# Sheet range to append data (default: Sheet1!A2:G)
SHEET_RANGE=Sheet1!A2:G

# ==============================================================================
# Application Configuration
# ==============================================================================
# Output file path for transaction JSON data
OUTPUT_FILE=/app/output/transaction_data.json

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Enable verbose logging (true/false)
VERBOSE_LOGGING=false

# ==============================================================================
# Email Processing Configuration
# ==============================================================================
# Number of days to look back for emails (default: 7 for weekly processing)
# Increase this value for the first run to process historical emails
EMAIL_DAYS_BACK=7

# Gmail label name for marking processed emails
GMAIL_LABEL_NAME=AutoSpendTracker/Processed

# Path to Gmail OAuth credentials file (mounted in container)
GMAIL_CREDENTIALS_FILE=/app/secrets/credentials.json

# ==============================================================================
# AI Model Configuration
# ==============================================================================
# Google Gemini model name (default: gemini-2.5-flash)
MODEL_NAME=gemini-2.5-flash

# Model temperature for AI responses (0.0-2.0, lower = more deterministic)
MODEL_TEMPERATURE=0.1

# ==============================================================================
# Rate Limiting & Cost Control
# ==============================================================================
# Maximum API calls per period
API_RATE_LIMIT_CALLS=60

# Rate limit period in seconds
API_RATE_LIMIT_PERIOD=60

# Daily API budget in dollars (optional)
# Uncomment to enable budget tracking
# DAILY_BUDGET=5.00

# Budget alert threshold (0.0-1.0, e.g., 0.8 = 80%)
# BUDGET_ALERT_THRESHOLD=0.8

# ==============================================================================
# Performance Monitoring
# ==============================================================================
# Enable performance monitoring and metrics collection (true/false)
ENABLE_PERFORMANCE_MONITORING=true

# Metrics logging level (DEBUG, INFO, WARNING, ERROR)
METRICS_LOG_LEVEL=INFO

# ==============================================================================
# Notification Configuration (REQUIRED for alerts)
# ==============================================================================
# Enable/disable all notifications (true/false)
NOTIFICATION_ENABLED=true

# Send notifications on successful runs (true/false)
NOTIFICATION_ON_SUCCESS=true

# Send notifications on failed runs (true/false)
NOTIFICATION_ON_FAILURE=true

# Email notification recipient
NOTIFICATION_EMAIL=your@email.com

# SMTP server configuration
# For Gmail: smtp.gmail.com
# For custom SMTP: your-smtp-server.com
NOTIFICATION_SMTP_HOST=smtp.gmail.com

# SMTP port (587 for TLS, 465 for SSL, 25 for unencrypted)
NOTIFICATION_SMTP_PORT=587

# SMTP authentication credentials
# For Gmail: Use your Gmail address
# IMPORTANT: For Gmail, create an App Password (https://myaccount.google.com/apppasswords)
# Do NOT use your regular Gmail password
NOTIFICATION_SMTP_USER=your@gmail.com
NOTIFICATION_SMTP_PASSWORD=your-gmail-app-password

# Optional: Webhook URL for notifications (e.g., Slack, Discord, custom endpoint)
# Leave empty to disable webhook notifications
NOTIFICATION_WEBHOOK=

# ==============================================================================
# Scheduling Configuration
# ==============================================================================
# Timezone for scheduling (important for accurate cron timing)
# Examples: America/New_York, America/Mexico_City, Europe/London, Asia/Tokyo
# See: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
TZ=America/Mexico_City

# Cron schedule expression (used by Ofelia in docker-compose.yml)
# Default: 0 0 * * * (daily at midnight)
# Format: minute hour day month weekday
# Examples:
#   0 0 * * *     = Daily at midnight
#   0 */6 * * *   = Every 6 hours
#   0 9 * * 1     = Every Monday at 9 AM
#   0 0 1 * *     = First day of each month at midnight
SCHEDULE_CRON=0 0 * * *

# ==============================================================================
# Log Retention Configuration
# ==============================================================================
# Number of days to keep logs (default: 20)
LOG_RETENTION_DAYS=20

# Maximum log file size before rotation (default: 100M)
LOG_MAX_SIZE=100M

# ==============================================================================
# Python Configuration (Advanced - usually don't need to change)
# ==============================================================================
# Ensure unbuffered output for better logging in Docker
PYTHONUNBUFFERED=1

# Don't write .pyc files (smaller image, faster startup)
PYTHONDONTWRITEBYTECODE=1

# ==============================================================================
# Coolify-Specific Configuration
# ==============================================================================
# Path to secrets directory (Coolify will mount this)
# You can upload credential files via Coolify UI, and they'll be available here
SECRETS_PATH=./secrets

# ==============================================================================
# IMPORTANT NOTES FOR COOLIFY DEPLOYMENT
# ==============================================================================
# 1. Set all these variables in Coolify's "Environment Variables" section
# 2. Mark sensitive values (passwords, API keys) as "Secret" in Coolify
# 3. Upload credential files via Coolify's "Secrets" or "Files" section:
#    - credentials.json (Gmail OAuth credentials)
#    - ASTservice.json (Google Cloud Service Account key)
# 4. The cron schedule is configured in docker-compose.yml labels
#    but you can override it with SCHEDULE_CRON environment variable
# 5. Logs are stored in persistent volumes and accessible via:
#    docker logs autospendtracker-app
#    docker exec autospendtracker-app cat /app/logs/autospendtracker.log
# ==============================================================================

# ==============================================================================
# GMAIL APP PASSWORD SETUP (Required for email notifications)
# ==============================================================================
# 1. Go to https://myaccount.google.com/apppasswords
# 2. Select "Mail" and "Other (Custom name)"
# 3. Enter "AutoSpendTracker" as the name
# 4. Click "Generate"
# 5. Copy the 16-character password (no spaces)
# 6. Use this password for NOTIFICATION_SMTP_PASSWORD
# 7. NEVER use your regular Gmail password!
# ==============================================================================
